<link rel="stylesheet" href="~/css/widget-current-song.css" />

<div id="song">OBSTools Current Song Widget</div>

<script>
    const song = document.getElementById("song");
    fetch("/MediaPlayer/CurrentSong")
        .then((response) => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            return response.json();
        })
        .then((json) => {
            console.log(json);
            song.innerHTML = json;
        })
        .catch((err) => {
            song.innerHTML = "";
        })
</script>